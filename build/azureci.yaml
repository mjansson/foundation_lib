variables:
  accessToken: none

trigger:
- master

pr:
- master
- develop

pool:
  vmImage: 'VS2017-Win2016'

steps:
- task: NuGetToolInstaller@0

- script: |
    nuget.exe sources Add -Name "Tools" -Source "https://mjansson.pkgs.visualstudio.com/_packaging/Tools/nuget/v2/index.json" -Username mjansson -Password $(System.AccessToken)
  displayName: 'nuget setup'

- script: |
    nuget.exe install ninja -Source "Tools" -ExcludeVersion
  displayName: 'install ninja'

- script: |
    python configure.py
  displayName: 'configure'

- script: |
    ninja\ninja.exe
  displayName: 'build'
